# Item 20

## 추상 클래스보다 인터페이스를 우선하라

원래는 인터페이스는 타입을 정의할 때 사용하고, 추상클래스는 인터페이스의 구현체를 일부 제공할 때 사용했다.
추상클래스는 오로지 하나만 상속이 가능하여 제약이 심해진다.

### 인터페이스의 장점

- Java 8 부터는 인터페이스도 `default method`를 제공할 수 있음
  - 기존 클래스도 쉽게 새로운 인터페이스를 구현해 넣을 수 있다
  - 구현이 명백한 것은 디폴트 메서드로
  - 물론 인스턴스의 필드를 사용해야되는 경우에는 추상클래스를 사용해야함
    - 이런 경우 추상 골격(skeleton) 클래스를 사용
- 인터페이스는 믹스인(mixin) 정의에 적합(선택적인 기능 추가)
  - 인터페이스는 부가 기능을 위한 추가적인 확장이 가능
- 계층 구조가 없는 타입 프레임워크를 만들 수 있음
- Wrapper Class 와 함꼐 사용하면 인터페이스는 기능을 향상시키는 안전하고 강력한 수단이 됨

### 인터페이스와 추상 골격 클래스

- 인터페이스와 추상 클래스의 장점을 모두 취할 수 있음
  - 인터페이스
    - 디폴트 메서드 구현
  - 추상 골격 클래스
    - 나머지 메서드 구현
  - 템플릿 메서드 패턴
- 다중 상속을 비슷하게 시물레이트 할 수 있음
- 골격 구현은 상속용 클래스이므로 item 19(문서화)를 따라야 함

## 완벽 공략

- 템플릿 메서드 패턴
- 디폴트 메서드는 equals, hashCode, toString 같은 Object 메서드를 재정의 할 수 없다

### 템플릿 메서드 패턴

- 알고리즘 구조를 서브클래스가 확장할 수 있도록 템플릿으로 제공하는 방법
  - 추상 클래스는 템플릿을 제공하고 하위클래스는 구체적인 알고리즘을 제공
- 템플릿 콜백패턴을 사용하면 상속을 사용하지 않더라도 확장가능하게 만들 수 있다

### 왜 인터페이스의 디폴트 메서드로 Object 메서드를 재정의 할 수 없을까?

- 디폴트 메서드의 핵심목적은 `인터페이스의 진화`
- 두 가지 규칙만 유지
  1. 클래스가 인터페이스를 이긴다
  2. 더 구체적인 인터페이스가 이긴다
- 토이 프로젝에나 어울리는 기능
  - 필드 값이 있어야 재정의가 가능한데, 인터페이스는 그런 것들을 가질 수 없음
- 불안정하다
  - 만약 인터페이스에서 재정의를 하게 되면, 복잡한 상속구조에서 인터페이스가 추가됬을 때 원래 사용하던 Object 메서드들의 동작에 변화가 생겨버림