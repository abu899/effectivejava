# Item 5

## 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라

- `사용하는 자원에 따라 동작이 달라지는 클래스`는 유틸리티 클래스나 싱글턴이 적합하지 않음
- 의존 객체 주입(Dependency Injection, DI)는 인스터를 생성할 떄 필요한 자원을 넘겨주는 방식
  - 또는 제어의 역전(Inversion of Control, IoC)
- 이 방식의 변형으로 생성자에 자원 팩터리를 넘겨줄 수 있음
- 의존 객체 주입을 사용하면 클래스의 유연성, 재사용성, 테스트 용이성을 개선 가능

## 완벽 공략

- 이 패턴의 쓸만한 변형으로 생성자에 자원 팩터리를 넘겨주는 방식이 있음
  - 자바 8에서 소개한 `Supplier 인터페이스`가 팩터리를 표현한 완벽한 예제
- 한정적 와일드카드 타입(Bounded wildcard)을 사용해 팩터리의 타입 매개변수를 제한
- 팩터리 메서드 패턴
- 의존 객체가 많은 경우 Dagger, Guice, Spring 같은 의존 객체 프레임워크 도입을 고려할 수 있음

### 팩터리 메서드 패턴

- 비슷하지만 다른 경우가 존재할 때
- 팩터리를 사용해서 비슷한 곳은 재사용하고, 다른 부분은 각자 처리
- 새로운 객체를 제공하는 팩터리를 추가하더라도, 팩터리를 사용하는 클라이언트 코드가 변경되지 않음

### 스프링 IoC(Inversion of Conversion)

- BeanFactory 또는 ApplicationContext
- Inversion of Control
  - 자기 코드에 대한 제어권을 자기가 가지는게 아닌 외부에서 제어하는 경우
  - 여기서 말하는 제어권이란, 인스턴스를 만들거나, 메서드를 실행, 필요로하는 의존성을 주입하는 등의 행동
    - 우리가 직접 new 를 선언한다거나, instance.hello 를 직접 호출한다던가 하는건 제어권이 나에게 있는 것
- 장점
  - 자바 표준 스펙(@Inject)도 지원
  - 손쉽게 싱글톤 Scope 를 사용 가능
  - 객체 생성(bean) 관련 라이프사이클 인터페이스를 제공